@defer (base.html; active_page="Discover"; playing_info=playing_info) {
  <div class="flex flex-col gap-8 px-4 animate-in fade-in slide-in-from-right-8 duration-300">
    <div
      class="pt-safe-or-4 sticky top-0 z-10 flex flex-col gap-4 bg-black/80 pb-4 backdrop-blur-md"
    >
      <div class="flex items-center gap-4">
        <a 
          href="/discover/genres" 
          class="flex size-10 items-center justify-center rounded-full bg-gray-900 text-gray-400 transition-all hover:bg-gray-800 hover:text-white active:scale-95"
          hx-boost="true"
          title="Back to Genres"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        </a>
        <h1 class="text-3xl font-bold tracking-tight text-white">{{ genre.name }}</h1>
      </div>
    </div>

    @for (album_feature in albums) {
      @if (album_feature[1]) {
        <div class="flex flex-col gap-3">
          <h3 class="text-xl font-semibold text-white">{{ album_feature[0] }}</h3>
          @defer (list-albums-vertical.html; albums=album_feature[1]; card_size="w-40") {}
        </div>
      }
    }

    @if (playlists) {
      <div class="flex flex-col gap-3">
        <h3 class="text-xl font-semibold text-white">Playlists</h3>
        @defer (list-playlists-vertical.html; playlists=playlists; card_size="w-40") {}
      </div>
    }
  </div>
}
