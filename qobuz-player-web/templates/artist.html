<div class="flex flex-col">
  <div class="max-w-md self-center p-4">
    <img
      src="{{ artist.image }}"
      alt="{{ artist.name }}"
      class="size-full rounded-lg object-contain"
    />
  </div>

  <div class="flex w-full grow flex-col items-center gap-4 p-4">
    <h1 class="text-2xl">{{ artist.name }}</h1>
    @defer (button-group.html) {
      <button
        class="button button-primary"
        hx-swap="none"
        hx-put="{{ artist.id }}/play-top-track/0"
      >
        <span class="size-6">
          @defer (icons/play.html) {}
        </span>
        <span>Play</span>
      </button>

      @defer (
        toggle-favorite.html;
        id=artist.id;
        is_favorite=is_favorite;
        api="/artist"
      ) {}
    }
  </div>

  <div class="flex flex-col gap-4">
    <div
      data-sse="tracklist"
      hx-trigger="tracklist"
      hx-target="#top-tracks"
      hx-get="{{ artist.id }}/top-tracks"
    >
      <h3 class="px-4 text-lg">Top tracks</h3>
      <div id="top-tracks">
        @defer (
          list-tracks.html;
          now_playing_id=playing_info.now_playing_id;
          tracks=top_tracks;
          show_artist=false;
          show_track_cover=true;
          click=click
        ) {}
      </div>
      <a href="/artist/{{ artist.id }}/top-tracks/page" class="button">
        Show more
      </a>
    </div>

    @if (artist.albums) {
      <div class="flex flex-col gap-2">
        <h3 class="px-4 text-lg">Albums</h3>
        @defer (list-albums-vertical.html; albums=artist.albums) {}
      </div>
    }

    @if (artist.singles) {
      <div class="flex flex-col gap-2">
        <h3 class="px-4 text-lg">EPs and singles</h3>
        @defer (list-albums-vertical.html; albums=artist.singles) {}
      </div>
    }

    @if (artist.live) {
      <div class="flex flex-col gap-2">
        <h3 class="px-4 text-lg">Live</h3>
        @defer (list-albums-vertical.html; albums=artist.live) {}
      </div>
    }

    @if (artist.compilations) {
      <div class="flex flex-col gap-2">
        <h3 class="px-4 text-lg">Compilations</h3>
        @defer (list-albums-vertical.html; albums=artist.compilations) {}
      </div>
    }

    @if (artist.similar_artists) {
      <div class="flex flex-col gap-2">
        <h3 class="px-4 text-lg">Similar artists</h3>
        @defer (list-artists-vertical.html; artists=artist.similar_artists) {}
      </div>
    }

    @if (artist.description) {
      @defer (
        description.html;
        description=artist.description title=artist.name
      ) {}
    }
  </div>
</div>
